#!/usr/bin/env nix-shell
#!nix-shell --pure -p nix -i bash

# Bootstrap mu - builds the package and runs it
# Usage: ./mu-bootstrap help, ./mu-bootstrap build personal, etc.

# Build mu if result doesn't exist or is older than source
if [ ! -e result ] || [ pkgs/mu/lib/core.janet -nt result ]; then
    echo "Building mu..."
    nix build .#nix-mu --quiet
fi

# Run the built mu with all arguments
exec ./result/bin/mu "$@"